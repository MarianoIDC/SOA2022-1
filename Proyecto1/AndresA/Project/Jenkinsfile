def doLint(){
	cd Proyecto1/AndresA/Project
	def buf = new ByteArrayOutputStream()
	def ps = new PrintStream(buf)
	def score = System.out
	def restore = System.out
	System.out = ps
	sh ''''pylint cosa.py --disable=all --enable=E,W,C0116 --reports=no module --output-format=parseable > pylint.log
		echo | python3 logParser.py'''
	System.out = restore
	echo score
	return score
}

pipeline {
    agent any
    stages {
		stage('check') {
            steps {
				script {
					score = doLint()
					if (score == 8){
						echo 'ok'
					} else {
						echo 'fail'
					}
				}
            }
        }
    }
}//https://stackoverflow.com/questions/36547680/how-do-i-get-the-output-of-a-shell-command-executed-using-into-a-variable-from-j
//https://www.jenkins.io/doc/book/pipeline/syntax/#declarative-steps