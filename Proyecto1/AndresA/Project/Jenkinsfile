def doLint(){
	try {
		sh ( script:"cd Proyecto1/AndresA/Project && pylint cosa.py --disable=all --enable=E,W,C0116 --reports=no module --output-format=parseable > pylint.log")
		def score = sh ( script: "cd Proyecto1/AndresA/Project && echo | python3 logParser.py",
			returnStdout: true
			).trim()
		echo "score: ${score}"
		return score
	} catch (Exception ex) {
		return 0
	}
	
}

pipeline {
    agent any
    stages {
		stage('check') {
            steps {
				script {
					score = doLint()
					if (score == 8){
						echo 'ok'
					} else {
						error 'score of: ${score}, less than 8'
					}
				}
            }
        }
    }
}