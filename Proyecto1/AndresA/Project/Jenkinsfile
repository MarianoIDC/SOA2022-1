pipeline {
    agent any
    stages {
		stage('check') {
            steps {
				script {
					sh '''cd Proyecto1/AndresA/Project
						  dir
					      pylint cosa.py --disable=all --enable=E,W,C0116 --reports=no module --output-format=parseable > pylint.log
						  cat pylint.log
						LINT_RESULT = sh(
							script:'echo | python3 logParser.py',
						returnStdout: true
						).trim()
						echo "lintRes: ${LINT_RESULT}"
						if (LINT_RESULT >= 8){
							echo 'ok'
						} else {
							echo 'fail'
						}
					'''
				}
            }
        }
        stage('build') {
            steps {
                sh 'python --version'
            }
        }
    }
}//https://stackoverflow.com/questions/36547680/how-do-i-get-the-output-of-a-shell-command-executed-using-into-a-variable-from-j
//https://www.jenkins.io/doc/book/pipeline/syntax/#declarative-steps